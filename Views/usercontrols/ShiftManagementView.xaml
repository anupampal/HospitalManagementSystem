<UserControl x:Class="HospitalManagementSystem.Views.UserControls.ShiftManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="700" d:DesignWidth="1000">

	<UserControl.Resources>
		<!-- DataGridStyle ensures the DataGrid is properly styled -->
		<Style x:Key="DataGridStyle" TargetType="{x:Type DataGrid}">
			<Setter Property="GridLinesVisibility" Value="Horizontal"/>
			<Setter Property="HorizontalGridLinesBrush" Value="#EAECEE"/>
			<Setter Property="BorderBrush" Value="#BDC3C7"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="RowBackground" Value="White"/>
			<Setter Property="AlternatingRowBackground" Value="#F8F9F9"/>
			<Setter Property="ColumnHeaderStyle">
				<Setter.Value>
					<Style TargetType="{x:Type DataGridColumnHeader}">
						<Setter Property="FontWeight" Value="SemiBold"/>
						<Setter Property="Background" Value="#ECF0F1"/>
						<Setter Property="Foreground" Value="#2C3E50"/>
						<Setter Property="Height" Value="30"/>
						<Setter Property="Padding" Value="5,0"/>
					</Style>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- ButtonStyle for consistent CRUD buttons -->
		<Style x:Key="{x:Static ToolBar.ButtonStyleKey}" TargetType="{x:Type Button}">
			<Setter Property="Padding" Value="8,4"/>
			<Setter Property="Margin" Value="2"/>
			<Setter Property="FontSize" Value="13"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="{x:Type Button}">
						<Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="5">
							<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Opacity" Value="0.85"/>
				</Trigger>
			</Style.Triggers>
		</Style>

	</UserControl.Resources>

	<Grid Margin="10">
		<Grid.ColumnDefinitions>
			<!-- Column 0: List of Shift Assignments (READ) -->
			<ColumnDefinition Width="3.5*"/>
			<!-- Column 1: Separator -->
			<ColumnDefinition Width="Auto"/>
			<!-- Column 2: Shift Details and CRUD actions (CREATE/UPDATE/DELETE) -->
			<ColumnDefinition Width="2.5*"/>
		</Grid.ColumnDefinitions>

		<!-- Main Title -->
		<TextBlock Text="📅 Nurse Shift Assignments"
                   FontSize="24"
                   FontWeight="SemiBold"
                   Foreground="#34495E"
                   Grid.ColumnSpan="3"
                   Margin="0,0,0,10"/>

		<!-- Shifts List DataGrid -->
		<StackPanel Grid.Column="0" Margin="0,50,10,0">
			<TextBlock Text="Current and Upcoming Shifts"
                       FontSize="16"
                       FontWeight="Bold"
                       Margin="0,0,0,5"/>

			<!-- x:Name="ShiftsDataGrid" links to the C# code -->
			<DataGrid x:Name="ShiftsDataGrid"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      Height="580"
                      Style="{DynamicResource DataGridStyle}"
                      SelectionMode="Single"
                      SelectionChanged="ShiftsDataGrid_SelectionChanged"
                      ItemsSource="{Binding ShiftsList}">
				<DataGrid.Columns>
					<DataGridTextColumn Header="ID" Binding="{Binding ShiftID}" Width="70"/>
					<DataGridTextColumn Header="Nurse ID" Binding="{Binding NurseID}" Width="*"/>
					<DataGridTextColumn Header="Date" Binding="{Binding AssignmentDate, StringFormat='{}{0:yyyy-MM-dd}'}" Width="1.2*"/>
					<DataGridTextColumn Header="Shift Type" Binding="{Binding ShiftType}" Width="1.5*"/>
					<DataGridTextColumn Header="Ward/Unit" Binding="{Binding Ward}" Width="1.5*"/>
				</DataGrid.Columns>
			</DataGrid>
		</StackPanel>

		<!-- Grid Splitter -->
		<GridSplitter Grid.Column="1"
                      Width="5"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Stretch"
                      Background="#E0E0E0"
                      Margin="5,50,5,0"/>


		<!-- Shift Details Panel (CRUD Form) -->
		<ScrollViewer Grid.Column="2" Margin="10,50,0,0" VerticalScrollBarVisibility="Auto">
			<StackPanel>

				<TextBlock Text="Assignment Details"
                           FontSize="18"
                           FontWeight="Bold"
                           Foreground="#2C3E50"
                           Margin="0,0,0,15"/>

				<!-- Read-Only Shift ID -->
				<StackPanel Orientation="Horizontal" Margin="0,0,0,10">
					<TextBlock Text="Shift ID: " FontWeight="SemiBold" Width="100"/>
					<TextBlock x:Name="ShiftIdTextBlock" Text="{Binding CurrentShift.ShiftID}" Width="150" Foreground="#7F8C8D"/>
				</StackPanel>

				<!-- Nurse ID and Date -->
				<TextBlock Text="Nurse &amp; Date" FontWeight="SemiBold" Margin="0,5,0,5"/>
				<Grid Margin="0,0,0,10">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>

					<TextBox x:Name="NurseIdTextBox"
                             Grid.Column="0"
                             Text="{Binding CurrentShift.NurseID}"
                             d:Text="N345"
                             ToolTip="Nurse Staff ID"
                             Margin="0,0,5,0"/>

					<DatePicker x:Name="AssignmentDatePicker"
                                Grid.Column="1"
                                SelectedDate="{Binding CurrentShift.AssignmentDate}"
                                Margin="5,0,0,0"/>
				</Grid>

				<!-- Shift Type and Ward -->
				<TextBlock Text="Shift Type and Ward" FontWeight="SemiBold" Margin="0,5,0,5"/>
				<Grid Margin="0,0,0,10">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>

					<!-- x:Name="ShiftTypeComboBox" links to the C# code -->
					<ComboBox x:Name="ShiftTypeComboBox"
                              Grid.Column="0"
                              SelectedValue="{Binding CurrentShift.ShiftType}"
                              Margin="0,0,5,0">
						<ComboBoxItem Content="Day (07:00 - 15:00)"/>
						<ComboBoxItem Content="Evening (15:00 - 23:00)"/>
						<ComboBoxItem Content="Night (23:00 - 07:00)"/>
						<ComboBoxItem Content="Float"/>
					</ComboBox>

					<TextBox x:Name="WardTextBox"
                             Grid.Column="1"
                             Text="{Binding CurrentShift.Ward}"
                             d:Text="ICU-East"
                             ToolTip="Assigned Ward or Unit"
                             Margin="5,0,0,0"/>
				</Grid>

				<!-- Notes -->
				<TextBlock Text="Notes / Special Instructions" FontWeight="SemiBold" Margin="0,5,0,5"/>
				<TextBox x:Name="NotesTextBox"
                         Text="{Binding CurrentShift.Notes}"
                         TextWrapping="Wrap"
                         Height="150"
                         VerticalScrollBarVisibility="Auto"
                         d:Text="Covering for vacationing nurse. Requires critical care certification."
                         Margin="0,0,0,10"/>

				<!-- Status -->
				<TextBlock Text="Status" FontWeight="SemiBold" Margin="0,5,0,5"/>
				<!-- x:Name="StatusComboBox" links to the C# code -->
				<ComboBox x:Name="StatusComboBox"
                          SelectedValue="{Binding CurrentShift.Status}"
                          Margin="0,0,0,10">
					<ComboBoxItem Content="Confirmed"/>
					<ComboBoxItem Content="Tentative"/>
					<ComboBoxItem Content="Cancelled"/>
					<ComboBoxItem Content="Completed"/>
				</ComboBox>

				<!-- Audit/Metadata (Read-Only) -->
				<GroupBox Header="Audit Information" Margin="0,10,0,10" Padding="10">
					<StackPanel>
						<StackPanel Orientation="Horizontal" Margin="0,0,0,5">
							<TextBlock Text="Created: " FontWeight="Normal" Width="70"/>
							<TextBlock x:Name="CreatedDateTextBlock" Text="{Binding CurrentShift.CreatedDate}" Foreground="#7F8C8D"/>
						</StackPanel>
						<StackPanel Orientation="Horizontal" Margin="0,0,0,5">
							<TextBlock Text="Updated: " FontWeight="Normal" Width="70"/>
							<TextBlock x:Name="UpdatedDateTextBlock" Text="{Binding CurrentShift.UpdatedDate}" Foreground="#7F8C8D"/>
						</StackPanel>
						<StackPanel Orientation="Horizontal">
							<TextBlock Text="By: " FontWeight="Normal" Width="70"/>
							<TextBlock x:Name="UpdatedByTextBlock" Text="{Binding CurrentShift.UpdatedBy}" Foreground="#7F8C8D"/>
						</StackPanel>
					</StackPanel>
				</GroupBox>

				<!-- CRUD Actions -->
				<StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">

					<!-- x:Name="NewShiftButton" calls NewShiftButton_Click -->
					<Button Content="➕ New Assignment"
                            x:Name="NewShiftButton"
                            Click="NewShiftButton_Click"
                            Style="{DynamicResource {x:Static ToolBar.ButtonStyleKey}}"
                            Background="#F39C12" Foreground="White"
                            Padding="10,5" Margin="0,0,10,0"/>

					<!-- x:Name="DeleteShiftButton" links to the C# code -->
					<Button Content="🗑 Delete Assignment"
                            x:Name="DeleteShiftButton"
                            Click="DeleteShiftButton_Click"
                            Style="{DynamicResource {x:Static ToolBar.ButtonStyleKey}}"
                            Background="#E74C3C" Foreground="White"
                            Padding="10,5" Margin="0,0,10,0"/>

					<!-- x:Name="SaveShiftButton" calls SaveShiftButton_Click -->
					<Button Content="💾 Save Assignment"
                            x:Name="SaveShiftButton"
                            Click="SaveShiftButton_Click"
                            Style="{DynamicResource {x:Static ToolBar.ButtonStyleKey}}"
                            Background="#2ECC71" Foreground="White"
                            Padding="15,5"/>
				</StackPanel>

			</StackPanel>
		</ScrollViewer>

	</Grid>
</UserControl>
